<html>
  <head>
    <title>PSYCH 251 2021 KP</title>
    <script src="jspsych-6/jspsych.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="jspsych-6/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych-6/plugins/jspsych-image-button-response.js"></script>
    <script src="jspsych-6/plugins/jspsych-image-keyboard-response.js"></script>
    <link rel="stylesheet" href="jspsych-6/css/jspsych.css">
  </head>
  <body></body>
  <script>
  
      var subj_ID = jsPsych.randomization.randomID(5)
      
      jsPsych.data.addProperties({
        subject: subj_ID
      }) 
      
      var preload = {
        type: 'preload',
        auto_preload: true 
      }
      
      var instructions_general = {
        type: 'html-keyboard-response',
        stimulus: '<center><p>In this study, you will be trained to use two emotion regulation strategies. You will then practice using these strategies while viewing a series of images.</p><p><b>Please be aware that the images used in this study contain content that may be unpleasant or disturbing.</b></p><p>Your participation will take approximately 10 minutes. You will receive $2.00 as payment for your participation. By answering the following questions, you are participating in a study being performed by cognitive scientists in the Stanford Department of Psychology. If you have questions about this research, please contact us at <u>stanfordpsych251@gmail.com</u>. You must be at least 18 years old to participate. Your participation in this research is voluntary. You may decline to answer any or all of the following questions. You may decline further participation, at any time, without adverse consequences. Your anonymity is assured; the researchers who have requested your participation will not receive any personal information about you. </p><p>Press the spacebar to begin.</p></center>',
        choices: ' ',
        response_ends_trial: true
      }
      
      var instructions_training = {
        type: 'html-keyboard-response',
        stimulus: '<center><p>In this part of the study, you will read instructions for how to implement two emotion regulaiton strategies: <b>reappraisal</b> and <b>distraction</b>. You will then see a series of 4 images accompanied by instructions for which emotion regulation strategy to use.</p><p>Press the spacebar to continue.</p></center>',
        choices: ' ',
        response_ends_trial: true
      }
      
      var instructions_reappraisal = {
        type: 'html-keyboard-response',
        stimulus: '<center><p><b>Reappraisal</b></p><p>Reappraisal involves attending to the emotional situation, but trying to change the meaning of it. The idea is to think of something to tell yourself about the situation that can help you to feel less negative about it. For example, you could think about the outcome of a situation, such as whatever is going on soon will soon be resolved or that help is on the way. You could also focus on a detail of the situation that may not be as bad as it first seemed.</p><p>When you use reappraisal, please stay focused on the images that you see, and try not to think of random things that make you feel better, but rather to change something about the picture that helps you to feel less negative about it. Please do not think that the picture is fake or a scene from a movie, but find another way to change the meaning.</p><p>Press the spacebar to continue</p></center>',
        choices: ' ',
        response_ends_trial: true
      }
      
      var reappraisal_training = {
        timeline: [
          {
            type: 'survey-text',
            preamble: `<img src=iaps/3030ht.jpg style="width:500px;"></img>`,
            questions: [
              {prompt: '<p><b>Reappraise:</b> look at the image and think about it in a way that reduces its negative meaning.</p><p>In the box below, please describe how you used this strategy</p>', rows: 3}
              ]
          },
          
                    {
            type: 'survey-text',
            preamble: `<img src=iaps/2457lt.jpg style="width:500px;"></img>`,
            questions: [
              {prompt: '<p><b>Reappraise:</b> look at the image and think about it in a way that reduces its negative meaning.</p><p>In the box below, please describe how you used this strategy</p>', rows: 3}
              ]
          }
          ]
      }
      
            var instructions_distraction = {
              type: 'html-keyboard-response',
              stimulus: '<center><p><b>Distraction</b></p><p>Distraction involves focusing thoughts and attention on something that is completely unrelated to the emotional situation.The idea is to try and feel less negative by thinking of something that is neutral and completely unrelated. There are a few ways that you can use distraction to change the way that you feel. For example, you might imagine yourself doing everyday tasks, such as going for a walk or making a hot drink.</p><p>When you use distraction, please stay focused on the image and do not avert your gaze. Please do not think of something highly emotional, rather think of something that is emotionally neutral and relatively mundane that will keep your mind distracted from what you can see on the screen.</p><p>Press the spacebar to continue</p></center>',
              choices: ' ',
              response_ends_trial: true
            }
      
      var distraction_training = {
                timeline: [
          {
            type: 'survey-text',
            preamble: `<img src=iaps/2205ht.jpg style="width:500px;"></img>`,
            questions: [
              {prompt: '<p><b>Distract:</b> look at the image and think about something that is emotionally neutral.</p><p>In the box below, please describe how you used this strategy</p>', rows: 3}
              ]
          },
          
                    {
            type: 'survey-text',
            preamble: `<img src=iaps/3022lt.jpg style="width:500px;"></img>`,
            questions: [
              {prompt: '<p><b>Distract:</b> look at the image and think about something that is emotionally neutral.</p><p>In the box below, please describe how you used this strategy</p>', rows: 3}
              ]
          }
          ]
      }
      
      var instructions_practice_1 = {
        type: 'html-keyboard-response',
        stimulus: '<center><p>We would now like you to practice using the two strategies you just learned. You will see an image presented briefly. You will then see that same image and implement the strategy that is written under the image. <b>Please look at the image for the entire time that it appears on the screen. After the time is up, the next image will appear automatically.</b></p></center>',
        choices: ' ',
        response_ends_trial: true
      }
      
      var practice_1_reappraisal = {
        timeline: [
          {
            type: 'image-keyboard-response',
            prompt: '<p>Press the spacebar to continue</p>',
            stimulus: jsPsych.timelineVariable('practice_1_reappraisal'),
            choices: ' ',
            stimulus_duration: 500,
            stimulus_height: 500,
            maintain_aspect_ratio: true
          },
          {
           type: 'image-keyboard-response',
           prompt: '<p>Reappraise</p>', 
           stimulus: jsPsych.timelineVariable('practice_1_reappraisal'),
           trial_duration: 5000,
           stimulus_height: 500,
           maintain_aspect_ratio: true,
           response_ends_trial: false
          },
          {
          type: 'html-keyboard-response',
          stimulus: '<div style="font-size:60px;">+</div>',
          choices: "NO_KEYS",
          trial_duration: 1000
          }
      ],
        
        timeline_variables: [
        { practice_1_reappraisal: 'iaps/2703hp.jpg'},
        { practice_1_reappraisal: 'iaps/2120lp.jpg'}
        ],
          randomize_order: true
      }
      
        var practice_1_distraction = {
        timeline: [
          {
            type: 'image-keyboard-response',
            prompt: '<p>Press the spacebar to continue</p>',
            stimulus: jsPsych.timelineVariable('practice_1_distraction'),
            choices: ' ',
            stimulus_duration: 500,
           stimulus_height: 500,
           maintain_aspect_ratio: true
          },
          {
           type: 'image-keyboard-response',
           prompt: '<p>Distract</p>', 
           stimulus: jsPsych.timelineVariable('practice_1_distraction'),
           trial_duration: 5000,
           stimulus_height: 500,
           maintain_aspect_ratio: true,
           response_ends_trial: false
          },
          {
          type: 'html-keyboard-response',
          stimulus: '<div style="font-size:60px;">+</div>',
          choices: "NO_KEYS",
          trial_duration: 1000
          }
        ],
        
        timeline_variables: [
        { practice_1_distraction: 'iaps/7521lp.jpg' },
        { practice_1_distraction: 'iaps/3051hp.jpg'}
        ],
          randomize_order: true
      }
      
      var instructions_practice_2 = {
        type: 'html-keyboard-response',
        stimulus: '<center><p>We would now like you to practice choosing between the two strategies you just learned. You will see a series of images presented briefly and <b>select which regulation strategy to use for each image</b>. When you are choosing which strategy to use to change the way that you feel about each picture, please take as much time as you need to make your choice. We would like you to pick the strategy that will help you to control your emotions - consider which of the strategies will make you feel less negative. There are no right or wrong answers, so do not be concerned about keeping a balance between your choices. You can choose whatever strategies you want during the task. This is completely your choice. Consider both strategies and pick the one that you think will make you feel less negative. Make your choice and start controlling your emotions when you see the image appear again. <b>It is important that you keep your eyes on the picture and not avert your gaze.</b></p></center>',
        choices: ' ',
        response_ends_trial: true
      }
      
      var practice_2 = {
        timeline: [
          {
            type: 'image-button-response',
            prompt: '<p>View the image above and select one of the two regulation strategies to implement.</p>',
            stimulus: jsPsych.timelineVariable('practice_2'),
            choices: ['Reappraise', 'Distract'],
            stimulus_duration: 500,
            response_ends_trial: true,
            margin_vertical: '20px',
           stimulus_height: 500,
           maintain_aspect_ratio: true
          },
          {
           type: 'image-keyboard-response',
           prompt: '<p>Implement selected strategy.</p>', 
           stimulus: jsPsych.timelineVariable('practice_2'),
           trial_duration: 5000,
           stimulus_height: 500,
           maintain_aspect_ratio: true,
           response_ends_trial: false
          },
          {
          type: 'html-keyboard-response',
          stimulus: '<div style="font-size:60px;">+</div>',
          choices: "NO_KEYS",
          trial_duration: 1000
          }
        ],
        
        timeline_variables: [
        { practice_2: 'iaps/9921hp.jpg' },
        { practice_2: 'iaps/9145lp.jpg' },
        { practice_2: 'iaps/8231lp.jpg' },
        { practice_2: 'iaps/3181hp.jpg' }
        ],
          randomize_order: true
      }
      
      
      var instructions_experiment = {
        type: 'html-keyboard-response',
        stimulus: '<center><p>You will see a series of images presented briefly and <b>select which regulation strategy to use for each image</b>. When you are choosing which strategy to use to change the way that you feel about each picture, please take as much time as you need to make your choice. We would like you to pick the strategy that will help you to control your emotions - consider which of the strategies will make you feel less negative. There are no right or wrong answers, so do not be concerned about keeping a balance between your choices. You can choose whatever strategies you want during the task. This is completely your choice. Consider both strategies and pick the one that you think will make you feel less negative. Make your choice and start controlling your emotions when you see the image appear again. <b>It is important that you keep your eyes on the picture and not avert your gaze.</b></p></center>',
        choices: ' ',
        response_ends_trial: true
      }
      
      var experiment = {
        timeline: [
          {
            type: 'image-button-response',
            prompt: '<p>View the image above and select one of the two regulation strategies to implement.</p>',
            stimulus: jsPsych.timelineVariable('iaps'),
            choices: ['Reappraise', 'Distract'],
            stimulus_duration: 500,
            response_ends_trial: true,
            margin_vertical: '20px',
           stimulus_height: 500,
           maintain_aspect_ratio: true
          },
          {
           type: 'image-keyboard-response',
           prompt: '<p>Implement selected strategy</p>', 
           stimulus: jsPsych.timelineVariable('iaps'),
           trial_duration: 5000,
           stimulus_height: 500,
           maintain_aspect_ratio: true,
           response_ends_trial: false
          },
          {
          type: 'html-keyboard-response',
          stimulus: '<div style="font-size:60px;">+</div>',
          choices: "NO_KEYS",
          trial_duration: 1000
          }
        ],
        timeline_variables: [
          { iaps:  'iaps/1301l.jpg'	},
          { iaps: 	'iaps/2053h.JPG'	},
          { iaps: 	'iaps/2278l.jpg'	},
          { iaps: 	'iaps/2312l.jpg'	},
          { iaps: 	'iaps/2490l.JPG'	},
          { iaps: 	'iaps/2691l.jpg'	},
          { iaps: 	'iaps/2700l.JPG'	},
          { iaps: 	'iaps/2800h.JPG'	},
          { iaps: 	'iaps/3000h.JPG'	},
          { iaps: 	'iaps/3068h.jpg'	},
          { iaps: 	'iaps/3140h.JPG'	},
          { iaps: 	'iaps/3150h.JPG'	},
          { iaps: 	'iaps/3180h.JPG'	},
          { iaps: 	'iaps/3230h.JPG'	},
          { iaps: 	'iaps/3261h.jpg'	},
          { iaps: 	'iaps/3530h.JPG'	},
          { iaps: 	'iaps/6010l.JPG'	},
          { iaps: 	'iaps/6190l.JPG'	},
          { iaps: 	'iaps/6831h.jpg'	},
          { iaps: 	'iaps/6836l.jpg'	},
          { iaps: 	'iaps/7360l.JPG'	},
          { iaps: 	'iaps/9102l.JPG'	},
          { iaps: 	'iaps/9120l.JPG'	},
          { iaps: 	'iaps/9160l.JPG'	},
          { iaps: 	'iaps/9181h.jpg'	},
          { iaps: 	'iaps/9252h.jpg'	},
          { iaps: 	'iaps/9410h.JPG'	},
          { iaps: 	'iaps/9420h.JPG'	},
          { iaps: 	'iaps/9440l.JPG'	},
          { iaps: 	'iaps/9470l.jpg'	}
        ],
          randomize_order: true
      }
      
      var demographics = {
        type: 'survey-text',
        questions: [
          {prompt: 'How old are you', name: 'Age'},
          {prompt: 'What is your gender', name: 'Gender'},
          {prompt: 'Are there any additional comments you wish to share with the research team? (optional)', name: 'Comments'}
          ]
      }
      
            
      function save_data() {
    jQuery.ajax({
        type: 'post',
        cache: false,
        url: 'https://stanford.edu/~kpetrova/cgi-bin/save_data.php',
        data: {
            data_dir: 'data',
            file_name: 'hit_' + subj_ID + '.csv',
            exp_data: jsPsych.data.get().csv()
        }
    })
}

      jsPsych.init({
        timeline: [
          instructions_general, 
          instructions_training, 
          instructions_reappraisal,
          reappraisal_training, 
          instructions_distraction,
          distraction_training, 
          instructions_practice_1,
          practice_1_reappraisal,
          practice_1_distraction,
          instructions_practice_2,
          practice_2,
          instructions_experiment, 
          experiment,
          demographics],
            on_finish: function(){
        save_data()
        document.body.innerHTML = '<p>Thank you for your participation! Please <b>DO NOT LEAVE THIS PAGE!</b> You will be redirected back to Prolific to complete your participation <b>in 5 seconds.</b></p>'
        setTimeout(function () { location.href = "https://app.prolific.co/submissions/complete?cc=77808FCA" }, 5000)
    }
})
      
    </script>
  </html>
